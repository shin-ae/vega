<!DOCTYPE html>
<html>

<head>
  <title>Embedding Vega-Lite</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.8/vega.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.3/vega-lite.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-embed/3.0.0-rc7/vega-embed.js"></script>

  <style>

  </style>
</head>

<body>

  <div id="vis"></div>

  <script type="text/javascript">
    var w = window.innerWidth;
    var h = window.innerHeight;
    // window.addEventListener("resize", cal);


    // function cal() {
    //   w = window.innerWidth;
    //   h = window.innerHeight;
    //   console.log(w);
    //   console.log(h);
    // }
    var yourVlSpec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
      "description": "Stock prices of 5 Tech Companies over Time.",
      "width": w - 290,
      "height": h - 80,
      "data": {
        "url": "index_scaled_price.csv"
      },
      "layer": [{
        "mark": "rect",
        "data": {
          "values": [{
            "start": "2008-10",
            "end": "2010-11",
            "event": "호롤호롤"
          }],
          "format": {
            "parse": {
              "start": "date:'%Y-%m'",
              "end": "date:'%Y-%m'"
            }
          }
        },
        "encoding": {
          "x": {
            "field": "start",
            "type": "temporal",
            "timeUnit": "year",
            "axis": {
              "format": "%Y-%m",
              "grid": false
            }
          },
          "x2": {
            "field": "end",
            "type": "temporal",
            "timeUnit": "year"
          },
          "color": {
            "value": "rgba( 255,0,0, 0.1)"
          }
        }
      }, {
        "mark": "rect",
        "data": {
          "values": [{
            "start": "2009-10",
            "end": "2011-12",
            "event": "GDR (East Germany)"
          }],
          "format": {
            "parse": {
              "start": "date:'%Y-%m'",
              "end": "date:'%Y-%m'"
            }
          }
        },
        "encoding": {
          "x": {
            "field": "start",
            "type": "temporal",
            "timeUnit": "year",
            "axis": {
              "format": "%Y-%m",
              "grid": false
            }
          },
          // "x2": {
          //   "field": "end",
          //   "type": "temporal",
          //   "timeUnit": "year"
          // },
          // "color": {
          //   "value": "rgba( 0,0,0, 0.1)"
          // }
        }
      }, {
        "mark": "line",
        "encoding": {
          "x": {
            "field": "date",
            "type": "temporal",
            "axis": {
              "format": "%Y-%m",
              "grid": false,
              "labelAngle": "320"
            }
          },
          "y": {
            "field": "price",
            "type": "quantitative",
            "axis": {
              "tickCount": 9,
            }
          },
          "color": {
            "field": "index",
            "type": "nominal",
            "scale": {
              "range": ["#ff775e", "#f985a6", "#97d93f", "#febd3a", "#916ed6", "#6489ae", "#44b9e2"]
            }
          }
        }
      }],
      "config": {
        "view": {
          "stroke": "transparent"
        }
      }
    }
    vegaEmbed("#vis", yourVlSpec, {
      "renderer": "svg",
      "actions": {
        export: true
      }
    });
  </script>
</body>

</html>